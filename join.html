<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Join H4TE</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="style.css">

<style>
/* ===== GLOBAL ===== */
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #000;
  color: #fff;
}

/* ===== NAVBAR ===== */
.navbar {
  position: fixed;
  top: 0;
  width: 100%;
  height: 70px;
  background: rgba(0,0,0,0.9);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.nav-links {
  list-style: none;
  display: flex;
  gap: 30px;
}

.nav-links a {
  color: white;
  text-decoration: none;
  font-weight: bold;
}

/* ===== PAGE LAYOUT ===== */
.join-page {
  padding-top: 100px;
  max-width: 1200px;
  margin: auto;
}

/* ===== ROLE BOXES ===== */
.roles {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px,1fr));
  gap: 20px;
  margin-bottom: 60px;
}

.role-box {
  background: #111;
  padding: 25px;
  border-radius: 16px;
  box-shadow: 0 0 30px rgba(255,0,0,0.15);
}

.role-box h2 {
  color: red;
}

/* ===== FORM BOX ===== */
.form-box {
  background: #111;
  padding: 40px;
  border-radius: 20px;
  max-width: 800px;
  margin: auto;
  box-shadow: 0 0 40px rgba(255,0,0,0.25);
}

.form-box h1 {
  text-align: center;
  margin-bottom: 30px;
}

form {
  display: grid;
  gap: 15px;
}

input, textarea, select {
  background: #000;
  color: white;
  border: 1px solid #333;
  padding: 12px;
  border-radius: 8px;
}

button {
  background: red;
  border: none;
  padding: 15px;
  border-radius: 30px;
  color: white;
  font-size: 16px;
  cursor: pointer;
}

button:hover {
  background: #ff2222;
}

.success {
  text-align: center;
  margin-top: 20px;
  color: #0f0;
  display: none;
}
</style>
</head>

  <script src="js/transitions.js"></script>

<body>
  
<!-- Video Background -->
<div class="video-bg">
  <video autoplay muted loop playsinline>
    <source src="videos/joinus-bg.mp4" type="video/mp4">
  </video>
</div>

<!-- Dark Overlay -->
<div class="video-overlay"></div>

</div>
<nav class="navbar">
<ul class="nav-links nav-center">
<li><a href="index.html">Home</a></li>
<li><a href="team.html">Roster</a></li>
<li><a href="tournaments.html">Tournaments</a></li>
<li><a href="about.html">About</a></li>
<li><a href="socials.html">Socials</a></li>
<li><a href="media.html">Media</a></li>
<li><a href="join.html">Join Us</a></li>
<li><a href="shop.html">Shop</a></li>

</ul>
</nav>

<!-- PAGE -->
<div class="join-page">

  <!-- ROLES -->
  <div class="roles">
    <div class="role-box">
      <h2>Competitive</h2>
      <p>Main & academy players competing in tournaments.</p>
    </div>

    <div class="role-box">
      <h2>Content Creator</h2>
      <p>YouTube, TikTok, Twitch creators representing H4TE.</p>
    </div>

    <div class="role-box">
      <h2>Staff</h2>
      <p>Coaches, analysts, admins, and social staff.</p>
    </div>
  </div>

  <!-- FORM -->
  <div class="form-box">
    <h1>Apply to H4TE</h1>

    <form id="joinForm">
      <input name="ign" placeholder="In-Game Name" required>
      <input name="discord" placeholder="Discord Username" required>
      <input name="region" placeholder="Region">
      
      <select name="role">
        <option value="Competitive">Competitive</option>
        <option value="Content Creator">Content Creator</option>
        <option value="Staff">Staff</option>
      </select>

      <input name="socials" placeholder="Social Links">
      <textarea name="experience" placeholder="Experience"></textarea>
      <textarea name="why" placeholder="Why do you want to join?"></textarea>
      <textarea name="help" placeholder="What can H4TE do for you?"></textarea>

      <button type="submit">Submit Application</button>
    </form>

    <div class="success" id="successMsg">âœ… Application Sent!</div>
  </div>

</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const form = document.getElementById("joinForm");
  const successMsg = document.getElementById("successMsg");

  if (!form) {
    console.error("joinForm not found");
    return;
  }

  const WEBHOOK_URL = "https://discordapp.com/api/webhooks/1468490166699294844/Dbuhpy1Xjkiwvre1HxTCN73SIfjpKC_Hfjm0KlDJjdeoTiSaZy1r4GyirBCaK1PN4gkc";

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const data = new FormData(form);

    // Generate Application ID
    const appID = "H4TE-" + Math.floor(100000 + Math.random() * 900000);

    const role = data.get("role");

    // Role â†’ Discord ping
    let rolePing = "@Recruitment";
    if (role === "Competitive") rolePing = "@Competitive Staff";
    if (role === "Content Creator") rolePing = "@Creator Staff";
    if (role === "Staff") rolePing = "@Staff Team";

    const payload = {
      content: `ðŸ“¥ **NEW APPLICATION RECEIVED**\n${rolePing}`,
      embeds: [{
        title: "H4TE Join Application",
        color: 16711680,
        fields: [
          { name: "Application ID", value: appID, inline: true },
          { name: "Role Applied", value: role, inline: true },
          { name: "IGN", value: data.get("ign"), inline: true },
          { name: "Discord", value: data.get("discord"), inline: true },
          { name: "Region", value: data.get("region") || "N/A", inline: true },
          { name: "Gadget / Specialty", value: data.get("gadget") || "N/A", inline: true },
          { name: "Experience", value: data.get("experience") || "N/A" },
          { name: "Social Links", value: data.get("socials") || "N/A" },
          { name: "Why Join", value: data.get("why") || "N/A" },
          { name: "What We Can Do", value: data.get("help") || "N/A" }
        ],
        footer: {
          text: "React below to update status"
        },
        timestamp: new Date().toISOString()
      }]
    };

    try {
      const res = await fetch(WEBHOOK_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });

      if (!res.ok) throw new Error("Webhook failed");

      // SUCCESS UI
      successMsg.style.display = "block";
      successMsg.innerText = `âœ… Application sent!\nYour Application ID: ${appID}`;

      form.reset();

      setTimeout(() => {
        successMsg.style.display = "none";
      }, 8000);

    } catch (err) {
      alert("Application failed. Please try again.");
      console.error(err);
    }
  });
});
</script>


</body>
</html>
